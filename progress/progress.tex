\documentclass[10pt, a4paper]{article}

\usepackage{syntonly}
%\syntaxonly
\usepackage{amsmath}
\usepackage{url}
%------------------------------------------------------------------------------
%   page
%------------------------------------------------------------------------------
\usepackage{geometry}
\geometry{margin=2cm}

%\pagestyle{empty}

%------------------------------------------------------------------------------
%   paragraph
%------------------------------------------------------------------------------
\usepackage{titlesec}
\setlength{\parindent}{0pt}
%\setlength{\parskip}{5ex plus 0.5ex minus 0.2ex}

%\titleformat{\paragraph}
%    {\normalfont\normalsize\bfseries}{\thesubparagraph}{1em}{}
%\titlespacing*{\paragraph}{\parindent}{3.25ex plus 1ex minus .2ex}{.75ex plus .1ex}
%\titleformat{\paragraph}
%    {\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
%\titleformat{\subparagraph}
%    {\normalfont\normalsize\bfseries}{\thesubparagraph}{1em}{}
%\titlespacing*{\subparagraph}{\parindent}{3.25ex plus 1ex minus .2ex}{.75ex plus .1ex}

%------------------------------------------------------------------------------
%   algorithm
%------------------------------------------------------------------------------
\usepackage{algorithm, algorithmicx}
\usepackage[noend]{algpseudocode}

%\newcommand*\Let[2]{\State #1 $\gets$ #2}
%\algnewcommand\Return[1]{\State #1}
%\algrenewcommand\algorithmicrequire{\textbf{Precondition:}}
%\algrenewcommand\algorithmicensure{\textbf{Postcondition:}}
%\algrenewtext{EndFor}{}

%------------------------------------------------------------------------------
%   theorem
%------------------------------------------------------------------------------
\usepackage{amsthm}
\newtheorem{theorem}{Theorem}

%------------------------------------------------------------------------------
%   graph
%------------------------------------------------------------------------------
\usepackage{tikz}


%------------------------------------------------------------------------------
%   list
%------------------------------------------------------------------------------
\usepackage{enumitem}


%------------------------------------------------------------------------------
%   paste code
%------------------------------------------------------------------------------
\usepackage{listings}
\lstset{showstringspaces=false}
%\lstdefinestyle{showspaces=false}
\usepackage{courier}
%\lstset{basicstyle=\footnotesize\ttfamily,breaklines=true}
\lstset{basicstyle=\normalfont\ttfamily,breaklines=true,showspaces=false}
%\lstset{framextopmargin=50pt,frame=bottomline}

%------------------------------------------------------------------------------
%   url
%------------------------------------------------------------------------------
\usepackage{hyperref}

%------------------------------------------------------------------------------
%   pic
%------------------------------------------------------------------------------
\usepackage{graphicx}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
%\graphicspath{ {./image} }
%\graphicspath{ {/Users/jjjj222/Documents/Dropbox/2015\_fall/database/project\_1/image} }
%------------------------------------------------------------------------------
%   title
%------------------------------------------------------------------------------
\usepackage{titling}
\setlength{\droptitle}{-5em}
\title{
    Advanced Networking and Security\\
    - Project Progress Report 
    \vspace{-2ex}
}
\author{
    \normalfont \normalsize 
    Chia-Cheng (Jeremy) Tso, 
    424008965\\
    %\vspace{-5ex}
    \normalfont \normalsize 
    Chun-Chan (Bill) Cheng, 
    924000036
    %\vspace{-5ex}
}
\date{
    \normalfont \normalsize 
    %\vspace{-9ex}
    \vspace{-5ex}
}

\begin{document}
%------------------------------------------------------------------------------
%   begin
%------------------------------------------------------------------------------
\maketitle
\section{Introduction}
In the final report we will mainly focus on the things stated below
because it's the most common setup and habits that prevents security issues. 
In the final report we will do case testing for the things we have proposed.
%------------------------------------------------------------------------------
%   
%------------------------------------------------------------------------------
\section{Configuration}
In the report we will mainly focus on the things stated below
because it's the most common setup. In the final report we will do case testing for the things we have proposed.
Configuring the environment is tedious but it is crucial. In web application, there are mainly three parts to configure
which are the system (linux), the server (apache), and the language that you are writing your web application on.
For now, we have gathered data on how to configured all the system, server, and PHP language (this is the language we will
focus on since it is the most popular server side language now). In the final report we will include the test cases on possible breaches when
configuration are not set.
\\\\
The linux system and apache server will be a important part when it comes to web application, since it's the first place to hit when an attacker
attacks. We have surveyed a lot of sources and decided which approach would be best to take to mitigate the attacks. Further information will
be discussed in the final report.
\\\\
PHP is the most popular server side language, more than $80\%$ of the servers is written in PHP\cite{PHPusuage}. We are mainly going to focus
on the php.ini document configuration and the different major frameworks that supports PHP. In these frameworks, different security are implemented
to prevent malicious attacks or user accidentally triggered attacks. We will look deeply into these implementation and analyze there pros and cons.
%Why? it's the basic
%First and formost, the most important one is the setup of environment.

%\subsection{general} % may remove?
%1. use good account name and password
%for both server and application admin

%\subsection{System Setup} % TODO: better term?
%In your web server never chmod 777 a file, which gives the read, write, and execute permission to every person. Also 
%always close unnecessary ports and service check commands, for example, netstat, nmap IP etc. Always setup a log
%and a backup server in case of an attack.\\


%3. close unnecessary ports/service
%check command: netstat, nmap IP
%close command: TODO

%4. setup ip whitelist
%force to connect by vpn
%file: /etc/hosts.allow
%content: in.telnetd: 192.168.1.0/255.255.255.0, : Allow

%5. setup log and backup

%\subsection{admin setup}
%DO's and DON'Ts
%\begin{enumerate}[label=\textbf{\arabic*.}]
%    \item
%\end{enumerate}
%
%\subsection{chmod}

%\subsection{web server setup}
%TODO: location of setup file

%apache:
%1. Protecting System Settings
%2. Protect Server Files by Default
%3. setup log
%http://www.petefreitag.com/item/505.cfm
%As for the apache server, always hide the Apache Version number, and other sensitive information. %TODO: paraphrase
%Make sure apache is running under its own user account and group and only root has read access to apache's config and binaries %TODO: paraphrase
%and ensure that files outside the web roots are not served.
%Turn off CGI execution
%Make sure only root has read access to apache's config and binaries
%http://www.tecmint.com/apache-security-tips/
%Disable Directory Listing
%Disable Apacheâ€™s following of Symbolic Links

%\subsection{Language setup}


%------------------------------------------------------------------------------
%   
%------------------------------------------------------------------------------
\section{String I/O}
String I/O are a crucial part in a web application security issues. A lot of famous attacks, like SQL injection,
cross site scripting, file inclusion and escaping etc. We are going discuss and give good examples on how
to cope with these issues. Since even good user may some times type in strings that are dangerous to the system.
String inputs are error prone, so this is an essential part to discuss with detail.
\\\\
In this section we will divide into a few subsections: 
\begin{enumerate}[label=\textbf{\arabic*.}]
    \item
	Input Validation: How to avoid javascript attacks or SQL injection by validating the input to see if it contains malicious code. This should be done both on the server side and client side.
    \item
    	White List: Words that are allowed to be input. For example if a web application asks for the password, some special character, for example $<$, must be omitted.
     \item
        Escape Characters: These characters $(\&, <, >, '', ' etc.)$ should be translated to other context , preventing switching into any execution context, such as script, style, or event handlers
     \item
     	Output:  We need to make sure that the data is properly validated or escaped. Validating the output is also to prevent attacks, such as Cross-site Scripting (XSS) and SQL Injection.
\end{enumerate}
%most problems are here
%TODO: cite
%37\% Cross-site scripting
%16\% SQL injection
%it's error-prone
%blah blah

%\subsection{Input}
%never trust user

%\subsubsection{White List}
%good for account password
%con: limited
%1. manual
%2. tool

%\subsubsection{Escape}
%pro: more general,
%con: hard to do it right
%escape function:
%1. php
%2. python
%    \item python escape function
%\begin{enumerate}[label=\textbf{\arabic*.}]
%    \item php escape function
%    \item python escape function
%\end{enumerate}

%\subsection{Output}
%reason: avoid XSS
%method: escape?
%how to escape html?


%------------------------------------------------------------------------------
%   
%------------------------------------------------------------------------------
\section{Database Access}
Almost all the information are stored in database today,
including users' account/password, their data, and their
personally identifiable information (PII).
Therefore,
databases are often the main target of attackers.
Among all the attacks, SQL injection is the most common one.
We focus on MySQL here because it's the LAMP \cite{LAMP} boudle is widely used.
\\\\
%\subsection{setup}
%account, password, access
%information.schema?
%access permission?
Setting up database correctly, as other part of the system, is a necessity.
We will discuss that later.
Another key point is to use the specialized functions provided by databases
instead of general ones. For example, using proposed function can effectively
avoid some SQL injection. Below is an example in Python:
\\\\
%\subsection{R/W}
%use proposed: avoid sql injection
%python example:
%cite: https://www.python.org/dev/peps/pep-0249/ Python Database API
%.execute ( operation [, parameters ])
%Prepare and execute a database operation (query or command).
%cur example: http://initd.org/psycopg/docs/usage.html#query-parameters
Don't:
\begin{lstlisting}[language=python]
cursor.execute("SELECT * FROM table WHERE id=%s" % (id));
\end{lstlisting}
Do:
\begin{lstlisting}[language=python]
cursor.execute("SELECT * FROM table WHERE id=%s" , id);
\end{lstlisting}
The first one is normal format string construction in python.
placeholder \%s will be replaced by id,
and the whole query will be executed.
Apparently, there is an injection problem.
%injection problem
On the other hand,
the second one use proposed function with paramters.
It pre-computes the query and apply the whole \%s directly for comparison.
%pre-compute
If somebody tries to perform an SQL injection, the system will block it automatically.
\begin{lstlisting}[language=python]
Warning: Truncated incorrect DOUBLE value: '1 OR 1=1'
\end{lstlisting}


%\subsection{data}
%django
%https://docs.djangoproject.com/en/1.8/topics/auth/passwords/
%http://stackoverflow.com/questions/749682/django-passwords Django Code

%https://en.wikipedia.org/wiki/Rainbow_table Rainbow table
%1. hash passward
%2. add salt while hashing, rainbow table


%------------------------------------------------------------------------------
%   crypto
%------------------------------------------------------------------------------
\section{Cryptographic Utilities}
%Needless to say, the
%network
Everybody knows that it's important to encrypt data while sending them over the internet,
yet not everybody does it right.
As the technologies of cryptography evolving,
they become more and more complicated.
%It's not the simple one-key-one-algorithm anymore.
Normally, in an encrpyted communication, there are more the 1 keys involved,
along with parameters, nonces, and different kinds of operation modes;
some of them should be kept secret, while others are not;
some of them can be reuse, while others must change every time.
%some are public, some should be kept secret,
%set up, %nonce, %some
It's overwhelming for most of developors, and even an expertise might sometimes get it wrong.
\\\\
%key, function, implementatino, nonce.
One of the exmples is the famous Sony PlayStation 3 issue \cite{PS3_Jailbreak}:
Sony used ECDSA \cite{ECDSA} but didn't change the ephemeral key, so the
private was calculated easily.
%cite https://en.wikipedia.org/wiki/PlayStation_Jailbreak
%cite https://en.wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm
Other well-known example is the
side channel attack such as differential power analysis \cite{differential}:
%cite https://en.wikipedia.org/wiki/Side-channel_attack
The implementation is correctly, but functional correctness is not sufficient to
be crpytographically secure.
%For the
%lack of knowledge
%looks fine but indeed not
\\\\
%cite http://www.nist.gov/ NIST
%cite https://www.owasp.org/index.php/Guide_to_Cryptography OWASP guide
%cite http://csrc.nist.gov/groups/ST/toolkit/documents/dss/NISTReCur.pdf NIST ecc recommendation
To support developors, we concluded the following guildlines:
%Three most important concepts
\begin{enumerate}[label=\textbf{\arabic*.}]
    \item
Always encrypt the communication. You never know what information would help hackers
break into your syatem, even if they appear to be harmless.
    \item
Use well-known standard, don't invent the encrpytion algorithm.
%TODO: NIST \cite{NIST}
%TODO: NXP mifare \cite{mifare_break}
    \item
%use the good one
Use the up-to-date standard.
Some algorithms such as md5 have been proved to be unsafe \cite{md5_break}.
    \item
Use libraries, don't implement algorithm yourself.
(even  RNG)
    \item
Use it right,
follow guides carefully for setup (such as those published by NIST \cite{NIST}).
\end{enumerate}

We will provide a more completet list of recommended functions,
for hash, symmetric and assymetric encropyion,
in many common web-debelop languages
in the final report.

%\subsection{SHA, AES, RSA, ECC?}
%provide some python function
%%cite: https://docs.python.org/2/library/hashlib.html#module-hashlib Python hashlib
%
%%cite: https://en.wikipedia.org/wiki/Cryptographic_hash_function#Cryptographic_hash_algorithms
%Don't use MD5, SHA-1
%Use SHA-2
%%cite: https://en.wikipedia.org/wiki/SHA-2
%
%good function for
%1. hash
%2. encrpytion
%3. randeon number geneerator
%%https://pypi.python.org/pypi/pycrypto
%python crypto function
%
%key strength match
%because the weakest part
%
%\subsection{SSL}
%library and their setup?


%------------------------------------------------------------------------------
%   
%------------------------------------------------------------------------------
\section{Useful Tools}
Many tools such as packer or fuzzer can help developers
further improve the quality of web application.
We will introduce some tools after doing some experiments on them.
%use tool to help us

%\subsection{packer}
%1. harden code
%2. enhance runtime
%\subsection{fuzzing/penetration test?}
%1. test

%\section{TDOO}
%1. build case to test
%2. detail usage
%3. test whether the guildlines are truly useful

\bibliographystyle{unsrt}
\bibliography{references}
%------------------------------------------------------------------------------
%   end
%------------------------------------------------------------------------------
\end{document}
